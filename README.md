# antifriction-trackpad

macOS トラックパッドに慣性カーソル移動を追加するツール。

トラックパッドから指を素早く離すと、カーソルが慣性で滑り続ける。指数減衰（`e^(-5t)`）で自然に減速し停止する。

## 機能

- **カーソル慣性** — 指を素早く離すとカーソルが滑り続ける
- **ドラッグ慣性** — ウィンドウのドラッグ中に指を離してもウィンドウが慣性で動き続ける
- **ドラッグ追従** — ドラッグ慣性中に再度指を置くとウィンドウを掴んだまま操作を継続できる

## 仕組み

1. MultitouchSupport.framework（プライベート API）でトラックパッドのタッチイベントを監視
2. CGEventTap でマウスボタンのイベントを傍受し、ドラッグセッションを制御
3. 指が離れた瞬間のカーソル速度を算出
4. ~60Hz のループで慣性移動を適用し、指数減衰で減速

## ビルド・実行

```bash
go build
./antifriction-trackpad
```

初回実行時にアクセシビリティ権限の許可が必要（システム設定 → プライバシーとセキュリティ → アクセシビリティ）。

Ctrl+C で終了。

## 要件

- macOS
- Go 1.23+
- トラックパッド搭載の Mac（外付け Magic Trackpad も可）
